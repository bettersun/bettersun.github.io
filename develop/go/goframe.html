<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>GoFrame | 任何一种技艺达到完美 都会令人无法抗拒</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.70335e15.css" as="style"><link rel="preload" href="/assets/js/app.21293e7e.js" as="script"><link rel="preload" href="/assets/js/2.8eacc119.js" as="script"><link rel="preload" href="/assets/js/16.ee154160.js" as="script"><link rel="prefetch" href="/assets/js/10.c00d78fd.js"><link rel="prefetch" href="/assets/js/11.00bd19e9.js"><link rel="prefetch" href="/assets/js/12.116d226d.js"><link rel="prefetch" href="/assets/js/13.d0b9fa48.js"><link rel="prefetch" href="/assets/js/14.9d286445.js"><link rel="prefetch" href="/assets/js/15.03bcc756.js"><link rel="prefetch" href="/assets/js/17.daef31fd.js"><link rel="prefetch" href="/assets/js/18.d743f55b.js"><link rel="prefetch" href="/assets/js/19.5794b62c.js"><link rel="prefetch" href="/assets/js/20.0194d02c.js"><link rel="prefetch" href="/assets/js/21.1957e3c3.js"><link rel="prefetch" href="/assets/js/22.bafcd85a.js"><link rel="prefetch" href="/assets/js/23.798381a0.js"><link rel="prefetch" href="/assets/js/24.76031871.js"><link rel="prefetch" href="/assets/js/25.d51497ac.js"><link rel="prefetch" href="/assets/js/26.927ca02f.js"><link rel="prefetch" href="/assets/js/27.4de652d4.js"><link rel="prefetch" href="/assets/js/28.a0c04b90.js"><link rel="prefetch" href="/assets/js/29.803035bd.js"><link rel="prefetch" href="/assets/js/3.26185a96.js"><link rel="prefetch" href="/assets/js/30.670967ec.js"><link rel="prefetch" href="/assets/js/31.52183a1f.js"><link rel="prefetch" href="/assets/js/32.1fcb2607.js"><link rel="prefetch" href="/assets/js/33.2236635d.js"><link rel="prefetch" href="/assets/js/34.58ce3fd6.js"><link rel="prefetch" href="/assets/js/35.74cd9a05.js"><link rel="prefetch" href="/assets/js/36.2edb68cd.js"><link rel="prefetch" href="/assets/js/37.7ee9035a.js"><link rel="prefetch" href="/assets/js/38.32cf6f27.js"><link rel="prefetch" href="/assets/js/39.2125da87.js"><link rel="prefetch" href="/assets/js/4.ede6d0fe.js"><link rel="prefetch" href="/assets/js/40.1b23068f.js"><link rel="prefetch" href="/assets/js/41.cc021ffd.js"><link rel="prefetch" href="/assets/js/42.090ca67a.js"><link rel="prefetch" href="/assets/js/43.a76d06be.js"><link rel="prefetch" href="/assets/js/44.c83e722b.js"><link rel="prefetch" href="/assets/js/45.a0a27d4f.js"><link rel="prefetch" href="/assets/js/46.82c9c359.js"><link rel="prefetch" href="/assets/js/47.64e1239b.js"><link rel="prefetch" href="/assets/js/48.d7fd7904.js"><link rel="prefetch" href="/assets/js/49.2f9a38e7.js"><link rel="prefetch" href="/assets/js/5.42523e56.js"><link rel="prefetch" href="/assets/js/50.a55efe78.js"><link rel="prefetch" href="/assets/js/51.988ab997.js"><link rel="prefetch" href="/assets/js/52.6f7f4c69.js"><link rel="prefetch" href="/assets/js/6.a2c02059.js"><link rel="prefetch" href="/assets/js/7.dfdea224.js"><link rel="prefetch" href="/assets/js/8.d60e2c53.js"><link rel="prefetch" href="/assets/js/9.90fb9240.js">
    <link rel="stylesheet" href="/assets/css/0.styles.70335e15.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">任何一种技艺达到完美 都会令人无法抗拒</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="内心的平和菜单" class="dropdown-title"><span class="title">内心的平和</span> <span class="arrow down"></span></button> <button type="button" aria-label="内心的平和菜单" class="mobile-dropdown-title"><span class="title">内心的平和</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/innerpeace/warrior/" class="nav-link">
  战士
</a></li><li class="dropdown-item"><!----> <a href="/innerpeace/diary/" class="nav-link">
  日记
</a></li></ul></div></div><div class="nav-item"><a href="/innerpeace/sakura/" class="nav-link">
  桜
</a></div><div class="nav-item"><a href="/develop/go/" class="nav-link router-link-active">
  GoLang
</a></div><div class="nav-item"><a href="/develop/flutter/" class="nav-link">
  Flutter
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="猿起菜单" class="dropdown-title"><span class="title">猿起</span> <span class="arrow down"></span></button> <button type="button" aria-label="猿起菜单" class="mobile-dropdown-title"><span class="title">猿起</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/develop/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/develop/node/" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/develop/mysql/" class="nav-link">
  MySql
</a></li><li class="dropdown-item"><!----> <a href="/develop/tool/" class="nav-link">
  工具
</a></li><li class="dropdown-item"><!----> <a href="/develop/mac/" class="nav-link">
  Mac
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于菜单" class="dropdown-title"><span class="title">关于</span> <span class="arrow down"></span></button> <button type="button" aria-label="关于菜单" class="mobile-dropdown-title"><span class="title">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/about/" class="nav-link">
  关于
</a></li><li class="dropdown-item"><!----> <a href="/about/favirate.html" class="nav-link">
  收藏夹
</a></li><li class="dropdown-item"><!----> <a href="/test/" class="nav-link">
  测试
</a></li><li class="dropdown-item"><!----> <a href="http://www.sunjiashu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  哪一站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="内心的平和菜单" class="dropdown-title"><span class="title">内心的平和</span> <span class="arrow down"></span></button> <button type="button" aria-label="内心的平和菜单" class="mobile-dropdown-title"><span class="title">内心的平和</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/innerpeace/warrior/" class="nav-link">
  战士
</a></li><li class="dropdown-item"><!----> <a href="/innerpeace/diary/" class="nav-link">
  日记
</a></li></ul></div></div><div class="nav-item"><a href="/innerpeace/sakura/" class="nav-link">
  桜
</a></div><div class="nav-item"><a href="/develop/go/" class="nav-link router-link-active">
  GoLang
</a></div><div class="nav-item"><a href="/develop/flutter/" class="nav-link">
  Flutter
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="猿起菜单" class="dropdown-title"><span class="title">猿起</span> <span class="arrow down"></span></button> <button type="button" aria-label="猿起菜单" class="mobile-dropdown-title"><span class="title">猿起</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/develop/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/develop/node/" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/develop/mysql/" class="nav-link">
  MySql
</a></li><li class="dropdown-item"><!----> <a href="/develop/tool/" class="nav-link">
  工具
</a></li><li class="dropdown-item"><!----> <a href="/develop/mac/" class="nav-link">
  Mac
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于菜单" class="dropdown-title"><span class="title">关于</span> <span class="arrow down"></span></button> <button type="button" aria-label="关于菜单" class="mobile-dropdown-title"><span class="title">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/about/" class="nav-link">
  关于
</a></li><li class="dropdown-item"><!----> <a href="/about/favirate.html" class="nav-link">
  收藏夹
</a></li><li class="dropdown-item"><!----> <a href="/test/" class="nav-link">
  测试
</a></li><li class="dropdown-item"><!----> <a href="http://www.sunjiashu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  哪一站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>GoLang</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/develop/go/" aria-current="page" class="sidebar-link">GoLang</a></li><li><a href="/develop/go/goframe.html" aria-current="page" class="active sidebar-link">GoFrame</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/develop/go/goframe.html#简单api开发" class="sidebar-link">简单API开发</a></li><li class="sidebar-sub-header"><a href="/develop/go/goframe.html#使用controller" class="sidebar-link">使用Controller</a></li><li class="sidebar-sub-header"><a href="/develop/go/goframe.html#使用controller并调用service" class="sidebar-link">使用Controller并调用Service</a></li><li class="sidebar-sub-header"><a href="/develop/go/goframe.html#访问数据库" class="sidebar-link">访问数据库</a></li></ul></li><li><a href="/develop/go/go-astilectron.html" class="sidebar-link">go-astilectron</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="goframe"><a href="#goframe" class="header-anchor">#</a> GoFrame</h1> <h2 id="简单api开发"><a href="#简单api开发" class="header-anchor">#</a> 简单API开发</h2> <ol><li><p>初始化项目</p> <p>本例使用xgo。<br>
新建xgo目录，然后进入目录后，执行命令 gf init xgo</p> <div class="language- extra-class"><pre class="language-text"><code>gf init xgo
</code></pre></div></li> <li><p>新建api</p> <p>本例机能使用 welcome。<br>
在./app/api目录下，新建机能目录。<br>
在新建的机能目录下新建api的代码文件。</p> <p>代码文件路径：<br>
./app/api/welcome/welcome.go</p> <p>代码内容：</p> <div class="language- extra-class"><pre class="language-text"><code>package welcome

import (
    &quot;github.com/gogf/gf/net/ghttp&quot;
)

// 
func Welcome(r *ghttp.Request) {
    r.Response.Writeln(&quot;Welcome to goframe!&quot;)
}
</code></pre></div><p>包名使用welcome。<br>
引入goframe封装的ghttp。<br>
编写API的处理函数，函数的参数是goframe封装的gttp.Request的指针。</p></li> <li><p>编写中间件</p> <p>本例编写一个跨域中间件<br>
在根目录下新建目录middleware。<br>
在middleware目录新建cors.go</p> <p>代码内容：</p> <div class="language- extra-class"><pre class="language-text"><code>package middleware

import &quot;github.com/gogf/gf/net/ghttp&quot;

// 允许接口跨域请求
func CORS(r *ghttp.Request) {
    r.Response.CORSDefault()
    r.Middleware.Next()
}
</code></pre></div></li> <li><p>注册路由</p> <p>默认的路由文件在./router/router.go中。</p> <p>官方示例中的说明：</p> <blockquote><p>// 你可以将路由注册放到一个文件中管理，<br>
// 也可以按照模块拆分到不同的文件中管理，<br>
// 但统一都放到router目录下。</p></blockquote> <p>本例先放在单一文件中。</p> <p>代码内容：</p> <div class="language- extra-class"><pre class="language-text"><code>package router

import (
    &quot;github.com/gogf/gf/frame/g&quot;
    &quot;github.com/gogf/gf/net/ghttp&quot;

    &quot;xgo/app/api/hello&quot;
    &quot;xgo/app/api/welcome&quot;

    &quot;xgo/middleware&quot;
)

func init() {
    s := g.Server()
    s.Group(&quot;/&quot;, func(group *ghttp.RouterGroup) {

        group.Middleware(middleware.CORS)

        group.ALL(&quot;/&quot;, hello.Hello)
        group.ALL(&quot;/welcome&quot;, welcome.Welcome)
    })
}

</code></pre></div></li> <li><p>运行服务</p> <div class="language- extra-class"><pre class="language-text"><code>go run main.go
</code></pre></div><p>运行服务后可在控制台看到所有服务的路由。</p></li> <li><p>访问URL</p> <p>访问 http://localhost:8199/welcome</p> <p>输出结果：</p> <div class="language- extra-class"><pre class="language-text"><code>Welcome to goframe!
</code></pre></div></li> <li><p>API返回JSON</p> <p>使用ghttp.Request.Response.WriteJson()方法返回JSON。<br>
修改 ./app/api/welcome/welcome.go</p> <div class="language- extra-class"><pre class="language-text"><code>package welcome

import (
    &quot;github.com/gogf/gf/net/ghttp&quot;
)

type WelcomeInfo struct {
    Message string `json:&quot;message&quot;`
}

func Welcome(r *ghttp.Request) {
    var welcomeInfo WelcomeInfo
    welcomeInfo.Message = &quot;Welcome to goframe!&quot;

    r.Response.WriteJson(welcomeInfo)
}
</code></pre></div><p>首先定义 WelcomeInfo 结构体，添加一个可导出属性Message，并指定json解析用键值。<br>
Welcome方法中，给WelcomeInfo实例的Message属性设定一个值。<br>
然后使用 ghttp.Request.Response.WriteJson() 返回JSON。</p> <p>访问URL后返回的原始数据为：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span><span class="token property">&quot;message&quot;</span><span class="token operator">:</span><span class="token string">&quot;Welcome to goframe!&quot;</span><span class="token punctuation">}</span>
</code></pre></div></li></ol> <h2 id="使用controller"><a href="#使用controller" class="header-anchor">#</a> 使用Controller</h2> <blockquote><p>基于前面的工程</p></blockquote> <ol><li><p>添加Controller</p> <p>在./app/api/welcome/welcome.go里定义一个空的结构体Controller作为API管理对象。<br>
路由注册时只需要把Controller注册给 /welcome，然后所有Controller指针的导出函数都会自动映射到对应的URL。<br>
非导出函数不会被映射。</p> <p>映射规则：</p> <ul><li>函数名的首字母大写，映射到对应的URL的首字母小写。</li> <li>函数名中间的大写字母会映射为 短线+小写字母。</li></ul> <p>例：<br>
WelcomeMessage()函数映射的URL为 /welcome/welcome-message。</p> <p>例如：<br>
welcome.go里为Controller定义了一个方法：</p> <div class="language- extra-class"><pre class="language-text"><code>package welcome

import (
    &quot;github.com/gogf/gf/net/ghttp&quot;
)

type Controller struct{}

func (c *Controller) Come(r *ghttp.Request) {

    r.Response.Writeln(&quot;Come to goframe!&quot;)
}

</code></pre></div></li> <li><p>改变路由注册方式</p> <p>新建一个welcome的Controller实例。<br>
然后把这个Controller实例注册到 /welcome 。</p> <div class="language- extra-class"><pre class="language-text"><code>package router

import (
    &quot;github.com/gogf/gf/frame/g&quot;
    &quot;github.com/gogf/gf/net/ghttp&quot;

    &quot;xgo/app/api/hello&quot;
    &quot;xgo/app/api/welcome&quot;

    &quot;xgo/middleware&quot;
)

func init() {
    s := g.Server()
    s.Group(&quot;/&quot;, func(group *ghttp.RouterGroup) {

        ctlWelcome := new(welcome.Controller)

        group.Middleware(middleware.CORS)

        group.ALL(&quot;/&quot;, hello.Hello)
        group.ALL(&quot;/welcome&quot;, ctlWelcome)
    })
}
</code></pre></div></li> <li><p>运行服务</p> <p>运行服务后可在控制台看到所有服务的路由。<br>
可以看到，./app/api/welcome/welcome.go里Controller的Come函数自动注册到/welcome/come的URL。</p></li> <li><p>访问URL</p> <p>访问 http://localhost:8199/welcome/come</p> <p>输出结果：</p> <div class="language- extra-class"><pre class="language-text"><code>Come to goframe!
</code></pre></div></li></ol> <h2 id="使用controller并调用service"><a href="#使用controller并调用service" class="header-anchor">#</a> 使用Controller并调用Service</h2> <blockquote><p>基于前面的工程</p></blockquote> <ol><li><p>新建Service用代码文件</p> <p>在./app/api/service目录下新建welcome目录，在welcome目录下新建welcome.go文件。</p> <p>代码路径：<br>
./app/api/service/welcome/welcome.go</p> <p>代码内容：</p> <div class="language- extra-class"><pre class="language-text"><code>package welcome

type WelcomeInfo struct {
    Message string `json:&quot;message&quot;`
}

func Message() string {
    return &quot;Welcome to goframe!&quot;
}

func Info() WelcomeInfo {

    var welcomeInfo WelcomeInfo
    welcomeInfo.Message = &quot;Welcome to goframe!&quot;

    return welcomeInfo
}
</code></pre></div></li> <li><p>在API文件Controller的函数中调用Service</p> <p>需要引入服务的机能包。</p> <div class="language- extra-class"><pre class="language-text"><code>package welcome

import (
    &quot;github.com/gogf/gf/net/ghttp&quot;

    &quot;xgo/app/service/welcome&quot;
)

type Controller struct{}

func (c *Controller) Message(r *ghttp.Request) {

    message := welcome.Message()
    r.Response.Writeln(message)
}

func (c *Controller) Info(r *ghttp.Request) {

    welcomeInfo := welcome.Info()
    r.Response.WriteJson(welcomeInfo)
}
</code></pre></div></li> <li><p>运行服务后访问URL确认。</p> <ul><li>访问 http://localhost:8199/welcome/message</li></ul> <p>输出结果：</p> <div class="language- extra-class"><pre class="language-text"><code>Welcome to goframe!
</code></pre></div><ul><li>访问 http://localhost:8199/welcome/info</li></ul> <p>输出结果：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span><span class="token property">&quot;message&quot;</span><span class="token operator">:</span><span class="token string">&quot;Welcome to goframe!&quot;</span><span class="token punctuation">}</span>
</code></pre></div></li></ol> <h2 id="访问数据库"><a href="#访问数据库" class="header-anchor">#</a> 访问数据库</h2> <blockquote><p>基于前面的工程</p></blockquote> <ol><li>创建数据库</li></ol> <p>MySQL</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">SCHEMA</span> <span class="token punctuation">`</span>db_xgo<span class="token punctuation">`</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8mb4 <span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>修改配置文件里的数据库连接</li></ol> <div class="language-toml extra-class"><pre class="language-toml"><code><span class="token comment"># Database.</span>
<span class="token punctuation">[</span><span class="token table class-name">database</span><span class="token punctuation">]</span>
    <span class="token key property">link</span>  <span class="token punctuation">=</span> <span class="token string">&quot;mysql:root:123456@tcp(127.0.0.1:3306)/db_xgo&quot;</span>
    <span class="token key property">debug</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>
    <span class="token comment"># Database logger.</span>
    <span class="token punctuation">[</span><span class="token table class-name">database.logger</span><span class="token punctuation">]</span>
        <span class="token key property">Path</span>   <span class="token punctuation">=</span> <span class="token string">&quot;/tmp/log/gf-app/sql&quot;</span>
        <span class="token key property">Level</span>  <span class="token punctuation">=</span> <span class="token string">&quot;all&quot;</span>
        <span class="token key property">Stdout</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>
</code></pre></div><ol start="3"><li><p>新建表</p> <p>新建系统用户表 sys_user。</p></li></ol> <div class="language- extra-class"><pre class="language-text"><code>CREATE TABLE `db_xgo`.`sys_user` (
  `id` INT NOT NULL,
  `user_id` VARCHAR(45) NULL,
  `password` VARCHAR(45) NULL,
  `user_name` VARCHAR(45) NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `user_id_UNIQUE` (`user_id` ASC));
</code></pre></div><ol start="4"><li><p>执行GoFrame的命令生成数据库表操作相关代码</p> <p>GoFrame命令官方文档：
https://goframe.org/toolchain/cli#</p> <p>在Go程序根目录下启动命令行执行命令</p> <div class="language- extra-class"><pre class="language-text"><code>gf gen model ./app/model
</code></pre></div><p>所有表的操作代码都会被生成。
上述命令的执行过程。</p> <div class="language- extra-class"><pre class="language-text"><code>E:\develop\github.com\bettersun\xgo\xgo&gt;gf gen model ./app/model
path './app/model' is not empty, files might be overwrote, continue? [y/n]: y
2020-07-28 16:48:41.084 [DEBU] [  7 ms] SHOW TABLES
2020-07-28 16:48:41.157 [DEBU] [  2 ms] SHOW FULL COLUMNS FROM `sys_user`
generated: ./app/model\sys_user\sys_user.go
generated: ./app/model\sys_user\sys_user_entity.go
generated: ./app/model\sys_user\sys_user_model.go
done!
</code></pre></div></li> <li><p>添加表操作代码</p> <p>在./app/service/welcome/welcome.go里添加函数，在函数里执行对表的查询。</p> <div class="language- extra-class"><pre class="language-text"><code>func WelecomeUser() string {

    var message string
    sysUser, err := sys_user.FindAll()

    if err != nil {
        fmt.Println(err)
        message = &quot;Error&quot;
        return message
    }

    if len(sysUser) &gt; 0 {
        message = &quot;Welcome, &quot; + sysUser[0].UserName + &quot;.&quot;
    } else {
        message = &quot;No user.&quot;
    }

    return message
}
</code></pre></div></li> <li><p>添加路由函数</p> <p>在./app/api/welcome/welcome.go里添加函数，在函数里调用Service里的函数。</p> <div class="language- extra-class"><pre class="language-text"><code>func (c *Controller) WelcomeUser(r *ghttp.Request) {

    WelecomeUser := welcome.WelecomeUser()
    r.Response.Writeln(WelecomeUser)
}
</code></pre></div></li> <li><p>运行服务访问URL</p> <p>访问 http://localhost:8199/welcome/welcome-user</p> <p>输出结果：</p> <div class="language- extra-class"><pre class="language-text"><code>No user.
</code></pre></div></li> <li><p>在数据库表中添加数据</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>db_xgo<span class="token punctuation">`</span><span class="token punctuation">.</span><span class="token punctuation">`</span>sys_user<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>user_id<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>password<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>user_name<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'bettersun'</span><span class="token punctuation">,</span> <span class="token string">'123456'</span><span class="token punctuation">,</span> <span class="token string">'此心光明'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>确保已提交。</p></blockquote></li> <li><p>再次访问URL</p> <p>访问 http://localhost:8199/welcome/welcome-user</p> <p>输出结果：</p> <div class="language- extra-class"><pre class="language-text"><code>Welcome, 此心光明.
</code></pre></div></li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最近更新时间:</span> <span class="time">7/28/2020, 9:36:57 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/develop/go/" class="prev router-link-active">
        GoLang
      </a></span> <span class="next"><a href="/develop/go/go-astilectron.html">
        go-astilectron
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.21293e7e.js" defer></script><script src="/assets/js/2.8eacc119.js" defer></script><script src="/assets/js/16.ee154160.js" defer></script>
  </body>
</html>
